<!DOCTYPE html>
<html>
<head>
    <title>File Upload </title>
</head>
<body>
<h1>File Upload</h1>
<input type="file" id="fileInput">
<button onclick="uploadFile()">Upload</button>

<script>
            function createDownloadButton(url) {
  const downloadButton = document.createElement("button");
  downloadButton.textContent = "Download File";
  downloadButton.addEventListener("click", () => {
    window.open(url);
  });
  document.body.appendChild(downloadButton);
}
        function uploadFile() {
            const fileInput = document.getElementById("fileInput");
            const file = fileInput.files[0];
            if (!file) {
                alert("Please select a file to upload.");
                return;
            }

            const serverUrl = "http://35.153.207.161";
            const portNumber = "5000";

            const formData = new FormData();
            formData.append("file", file);

            fetch(`${serverUrl}:${portNumber}/upload`, {
                method: "POST",
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    alert("File uploaded successfully!");
                    response.json().then(data => {
      const downloadUrl = data.url;

      createDownloadButton(downloadUrl);
    });
                } else {
                    alert("Failed to upload file.");
                }
            })
            .catch(error => {
                console.error("Error:", error);
                alert("An error occurred while uploading the file.");
            });
        }
    </script>
</body>
</html>

